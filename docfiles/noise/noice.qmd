
# Noise Reduction

## setup
```{python}
import numpy as np
import matplotlib.pyplot as plt
from scipy.signal import butter, filtfilt
with open("./data.txt") as f:
		data = f.readlines()
		data = [list(map(float, line.strip().split(","))) for line in data]
		convfsr1 = [row[0] for row in data]
		convfsr2 = [row[1] for row in data]
		convfsr3 = [row[2] for row in data]
		convfsr4 = [row[3] for row in data]
		convfsr5 = [row[4] for row in data]
		convpos  = [row[5] for row in data]

with open("./raw-data.txt") as f:
		data = f.readlines()
		data = [list(map(int, line.strip().split(","))) for line in data]
		rawfsr1 = [row[0] for row in data]
		rawfsr2 = [row[1] for row in data]
		rawfsr3 = [row[2] for row in data]
		rawfsr4 = [row[3] for row in data]
		rawfsr5 = [row[4] for row in data]
		rawpos  = [row[5] for row in data]

n = range(len(rawfsr1))
```


## raw analog data
```{python}
plt.scatter(n, rawfsr1, label="FSR1", s=1)
plt.title("Raw FSR1 Data")
plt.xlabel("Sample Number")
plt.ylabel("ADC Value (0-1023)")
plt.show()
plt.scatter(n, rawfsr2, label="FSR2", s=1)
plt.title("Raw FSR2 Data")
plt.xlabel("Sample Number")
plt.ylabel("ADC Value (0-1023)")
plt.show()
plt.scatter(n, rawfsr3, label="FSR3", s=1)
plt.title("Raw FSR3 Data")
plt.xlabel("Sample Number")
plt.ylabel("ADC Value (0-1023)")
plt.show()
plt.scatter(n, rawfsr4, label="FSR4", s=1)
plt.title("Raw FSR4 Data")
plt.xlabel("Sample Number")
plt.ylabel("ADC Value (0-1023)")
plt.show()
plt.scatter(n, rawfsr5, label="FSR5", s=1)
plt.title("Raw FSR5 Data")
plt.xlabel("Sample Number")
plt.ylabel("ADC Value (0-1023)")
plt.show()
plt.scatter(n, rawpos, label="Position", s=1)
plt.title("Raw Potentiometer Data")
plt.xlabel("Sample Number")
plt.ylabel("ADC Value (0-1023)")
plt.show()
```

## data after conversion
```{python}
n = range(len(convfsr1))
plt.scatter(n, convfsr1, label="FSR1", s=1)
plt.title("Converted FSR1 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, convfsr2, label="FSR2", s=1)
plt.title("Converted FSR2 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, convfsr3, label="FSR3", s=1)
plt.title("Converted FSR3 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, convfsr4, label="FSR4", s=1)
plt.title("Converted FSR4 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, convfsr5, label="FSR5", s=1)
plt.title("Converted FSR5 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, convpos, label="Position", s=1)
plt.title("Converted Potentiometer Data")
plt.xlabel("Sample Number")
plt.ylabel("Position (rad)")
plt.show()
```

## dft of data
```{python}

dft_fsr1 = np.fft.fft(convfsr1)
dft_fsr2 = np.fft.fft(convfsr2)
dft_fsr3 = np.fft.fft(convfsr3)
dft_fsr4 = np.fft.fft(convfsr4)
dft_fsr5 = np.fft.fft(convfsr5)
dft_pos  = np.fft.fft(convpos)

plt.plot([333/10000*i for i in range(len(dft_fsr1))],np.abs(dft_fsr1), label="FSR1")
plt.title("DFT of FSR1 Data")
plt.xlabel("Frequency (Hz)")
plt.ylabel("Magnitude")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_fsr2))],np.abs(dft_fsr2), label="FSR2")
plt.title("DFT of FSR2 Data")
plt.xlabel("Frequency (Hz)")
plt.ylabel("Magnitude")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_fsr3))],np.abs(dft_fsr3), label="FSR3")
plt.title("DFT of FSR3 Data")
plt.xlabel("Frequency (Hz)")
plt.ylabel("Magnitude")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_fsr4))],np.abs(dft_fsr4), label="FSR4")
plt.title("DFT of FSR4 Data")
plt.xlabel("Frequency (Hz)")
plt.ylabel("Magnitude")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_fsr5))],np.abs(dft_fsr5), label="FSR5")
plt.title("DFT of FSR5 Data")
plt.xlabel("Frequency (Hz)")
plt.ylabel("Magnitude")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_pos))],np.abs(dft_pos), label="Position")
plt.title("DFT of Potentiometer Data")
plt.xlabel("Frequency (Hz)")
plt.ylabel("Magnitude")
plt.show()
```

## butterworth filter for fsr data
```{python}
b, a = butter(2, 1, btype='low', fs=333)

fsr1_filt = filtfilt(b, a, convfsr1)
fsr2_filt = filtfilt(b, a, convfsr2)
fsr3_filt = filtfilt(b, a, convfsr3)
fsr4_filt = filtfilt(b, a, convfsr4)
fsr5_filt = filtfilt(b, a, convfsr5)

plt.scatter(n, fsr1_filt, label="FSR1", s=1)
plt.title("Filtered FSR1 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, fsr2_filt, label="FSR2", s=1)
plt.title("Filtered FSR2 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, fsr3_filt, label="FSR3", s=1)
plt.title("Filtered FSR3 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, fsr4_filt, label="FSR4", s=1)
plt.title("Filtered FSR4 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
plt.scatter(n, fsr5_filt, label="FSR5", s=1)
plt.title("Filtered FSR5 Data")
plt.xlabel("Sample Number")
plt.ylabel("Force (N)")
plt.show()
```

## dft of filtered fsr data
```{python}
dft_fsr1_filt = np.fft.fft(fsr1_filt)
dft_fsr2_filt = np.fft.fft(fsr2_filt)
dft_fsr3_filt = np.fft.fft(fsr3_filt)
dft_fsr4_filt = np.fft.fft(fsr4_filt)
dft_fsr5_filt = np.fft.fft(fsr5_filt)

plt.plot([333/10000*i for i in range(len(dft_fsr1_filt))],np.abs(dft_fsr1_filt), label="FSR1 Filtered")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_fsr2_filt))],np.abs(dft_fsr2_filt), label="FSR2 Filtered")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_fsr3_filt))],np.abs(dft_fsr3_filt), label="FSR3 Filtered")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_fsr4_filt))],np.abs(dft_fsr4_filt), label="FSR4 Filtered")
plt.show()
plt.plot([333/10000*i for i in range(len(dft_fsr5_filt))],np.abs(dft_fsr5_filt), label="FSR5 Filtered")
plt.show()
```

